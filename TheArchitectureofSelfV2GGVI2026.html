<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>V2Gmultimedia ‚Ä¢ The Architecture of Self</title>

<!-- Google Fonts: Lexend (Body) + Space Mono (Data/Tech) -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;800&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

<style>
  :root {
    --bg-dark: #050214;
    --bg-panel: rgba(10, 6, 32, 0.6);
    --primary: #a855ff;
    --accent-gold: #f4d06f;
    --text-main: #f7f3ff;
    --text-dim: rgba(247, 243, 255, 0.6);
    --tech-border: 1px solid rgba(168, 85, 255, 0.3);
    --glow: 0 0 20px rgba(168, 85, 255, 0.15);
  }

  body {
    margin: 0;
    font-family: "Lexend", sans-serif;
    background-color: var(--bg-dark);
    /* Cyber-grid background effect */
    background-image: 
      linear-gradient(rgba(168, 85, 255, 0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(168, 85, 255, 0.03) 1px, transparent 1px),
      radial-gradient(circle at 50% 0%, #2e005b, transparent 70%);
    background-size: 50px 50px, 50px 50px, 100% 100%;
    color: var(--text-main);
    overflow-x: hidden;
  }

  /* UTILITY: Monospace Data Text */
  .mono {
    font-family: "Space Mono", monospace;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 0.75rem;
    color: var(--accent-gold);
    opacity: 0.8;
  }

  /* --- FLOATING PORTAL NAV (HUD STYLE) --- */
  .portal-nav {
    position: fixed;
    top: 20px;
    width: 100%;
    display: flex;
    justify-content: space-between;
    padding: 0 5%;
    box-sizing: border-box;
    z-index: 1000;
    pointer-events: none; 
  }

  .portal-link {
    pointer-events: auto;
    text-decoration: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    opacity: 0.8;
  }

  .portal-link:hover {
    transform: scale(1.1);
    opacity: 1;
  }

  .portal-orb {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    background: rgba(0, 0, 0, 0.6);
    border: 1px solid var(--accent-gold);
    box-shadow: 0 0 10px var(--accent-gold);
    backdrop-filter: blur(4px);
    position: relative;
  }

  /* Orbit animation for the orb border */
  .portal-orb::after {
    content: '';
    position: absolute;
    top: -5px; left: -5px; right: -5px; bottom: -5px;
    border-radius: 50%;
    border: 1px dashed rgba(255,255,255,0.2);
    animation: spin 10s linear infinite;
  }

  @keyframes spin { 100% { transform: rotate(360deg); } }

  .portal-text {
    font-family: "Space Mono", monospace;
    font-size: 0.7rem;
    font-weight: 700;
    color: #fff;
    background: #000;
    padding: 2px 8px;
    border: 1px solid var(--primary);
    border-radius: 4px;
  }

  /* BRAND BAR */
  .brand-bar {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 1rem;
    background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent);
    margin-top: 60px; /* Space for fixed portals */
    flex-direction: column;
    gap: 2px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
  }
  .brand-logo {
    font-family: "Space Mono", monospace;
    font-weight: 700;
    font-size: 0.9rem;
    letter-spacing: 2px;
    color: #fff;
  }
  .hashtags {
    font-size: 0.7rem;
    color: var(--primary);
    letter-spacing: 1px;
  }

  /* HEADER */
  header {
    text-align: center;
    padding: 3rem 1rem 2rem;
    position: relative;
  }

  h1 {
    font-size: 3rem;
    margin-bottom: 0.2rem;
    color: #fff;
    text-transform: uppercase;
    letter-spacing: -1px;
    text-shadow: 0 0 30px rgba(168, 85, 255, 0.4);
    line-height: 1.1;
  }

  .subtitle {
    font-size: 1.1rem;
    color: var(--accent-gold);
    font-family: "Space Mono", monospace;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 2rem;
  }

  /* CHARACTER SVG STYLES */
  .character-container {
    display: flex;
    justify-content: center;
    gap: 3rem;
    margin: 2rem 0;
    flex-wrap: wrap;
    perspective: 1000px;
  }
  
  /* Link Wrapper for Characters */
  .char-link {
    display: inline-block;
    cursor: pointer;
    transition: transform 0.4s ease;
    text-decoration: none; /* Remove default link styles */
  }
  .char-link:hover {
    transform: translateZ(20px) scale(1.05);
  }

  .char-svg {
    width: 160px;
    height: 160px;
    filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5));
    /* Hover transform moved to .char-link:hover */
  }

  /* MAIN CONTAINERS - "DATA MODULE" STYLE */
  .section {
    width: 90%;
    max-width: 800px;
    margin: 3rem auto;
    padding: 2.5rem;
    background: var(--bg-panel);
    border: var(--tech-border);
    border-radius: 4px; 
    backdrop-filter: blur(12px);
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
    position: relative;
    overflow: hidden;
  }

  /* Top Border Accent */
  .section::before {
    content: '';
    position: absolute;
    top: 0; left: 0; width: 100%; height: 2px;
    background: linear-gradient(90deg, transparent, var(--accent-gold), transparent);
  }

  /* Corner accents */
  .corner-decor {
    position: absolute;
    width: 10px; height: 10px;
    border: 1px solid var(--accent-gold);
    opacity: 0.5;
  }
  .tl { top: 10px; left: 10px; border-right: 0; border-bottom: 0; }
  .br { bottom: 10px; right: 10px; border-left: 0; border-top: 0; }

  h2 {
    margin-top: 0;
    color: #fff;
    font-weight: 700;
    font-size: 1.8rem;
    letter-spacing: -0.5px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  h2::before {
    content: '//';
    color: var(--primary);
    font-family: "Space Mono", monospace;
    font-size: 1.2rem;
  }

  p {
    color: var(--text-dim);
    line-height: 1.6;
    margin-bottom: 2rem;
  }

  /* SLIDER STYLES */
  .slider-block {
    margin: 2.5rem 0;
  }
  .slider-label {
    display: block;
    margin-bottom: 10px;
    font-weight: 500;
  }
  
  input[type="range"] {
    width: 100%;
    cursor: pointer;
    height: 4px;
    background: rgba(255,255,255,0.1);
    border-radius: 2px;
    -webkit-appearance: none;
  }
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    height: 20px; width: 20px;
    background: var(--accent-gold);
    border-radius: 50%;
    box-shadow: 0 0 10px var(--accent-gold);
    margin-top: -8px;
  }
  input[type="range"]::-webkit-slider-runnable-track {
    height: 4px;
    background: rgba(255,255,255,0.1);
  }

  .feedback {
    margin-top: 0.8rem;
    font-family: "Space Mono", monospace;
    font-size: 0.8rem;
    color: var(--primary);
    border-left: 2px solid var(--primary);
    padding-left: 10px;
    min-height: 22px;
  }

  /* POPUP STYLES */
  .popup-btn {
    padding: 1rem;
    background: rgba(168, 85, 255, 0.05);
    border: 1px solid rgba(168, 85, 255, 0.2);
    border-radius: 4px;
    cursor: pointer;
    color: #fff;
    margin: 0.8rem 0;
    display: flex;
    align-items: center;
    transition: all 0.3s ease;
    font-family: "Space Mono", monospace;
    font-size: 0.9rem;
  }
  .popup-btn:hover {
    background: rgba(168, 85, 255, 0.15);
    border-color: var(--accent-gold);
    padding-left: 1.5rem;
  }
  .popup-icon {
    margin-right: 15px;
    color: var(--accent-gold);
  }

  .popup {
    display: none;
    margin-top: 0;
    margin-bottom: 1rem;
    background: #120c24;
    border-left: 2px solid var(--accent-gold);
    padding: 1.5rem;
    animation: slideDown 0.3s ease-out;
    color: var(--text-dim);
  }

  @keyframes slideDown {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* QUIZ STYLES */
  select {
    width: 100%;
    padding: 1rem;
    margin-top: 0.5rem;
    border-radius: 4px;
    border: 1px solid #333;
    background: #000;
    color: #fff;
    font-family: "Space Mono", monospace;
    font-size: 0.9rem;
    cursor: pointer;
    transition: 0.3s;
  }
  select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 15px rgba(168, 85, 255, 0.2);
  }

  .quiz-btn {
    display: block;
    width: 100%;
    padding: 1.2rem;
    color: #000;
    background: var(--accent-gold);
    border: none;
    font-family: "Space Mono", monospace;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    cursor: pointer;
    margin-top: 2rem;
    transition: 0.3s;
    clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
  }
  .quiz-btn:hover {
    background: #fff;
    box-shadow: 0 0 20px rgba(244, 208, 111, 0.4);
  }

  .final-message {
    padding: 2rem;
    background: rgba(255,255,255,0.03);
    border: 1px dashed rgba(255,255,255,0.1);
    margin-top: 2rem;
    font-size: 1.1rem;
    line-height: 1.6;
    text-align: center;
    display: none; /* Hidden by default */
  }

  /* Song Block Styles */
  .song-block {
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid rgba(244, 208, 111, 0.3);
    text-align: left;
    opacity: 0; 
    animation: fadeIn 1s forwards;
    animation-delay: 0.5s; 
  }
  
  .song-header {
    font-family: "Space Mono", monospace;
    font-size: 0.7rem;
    color: var(--primary);
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 0.5rem;
  }
  
  .song-title {
    font-size: 1.2rem;
    font-weight: 700;
    color: #fff;
    margin-bottom: 0.2rem;
  }
  
  .song-artist {
    font-size: 1rem;
    color: var(--accent-gold);
    margin-bottom: 1rem;
    font-weight: 500;
  }
  
  .song-quote {
    font-style: italic;
    color: var(--text-dim);
    font-size: 0.95rem;
    border-left: 3px solid var(--primary);
    padding-left: 1rem;
    line-height: 1.5;
  }
  
  .vibe-reason {
    margin-top: 1rem;
    font-size: 0.8rem;
    color: #888;
    font-family: "Space Mono", monospace;
  }

  /* ORACLE INPUT STYLES */
  .oracle-input {
    width: 100%;
    padding: 1rem;
    background: #000;
    border: 1px solid #333;
    color: #fff;
    font-family: "Space Mono", monospace;
    font-size: 1rem;
    margin-bottom: 1rem;
    border-radius: 4px;
    box-sizing: border-box;
  }
  .oracle-input:focus {
    outline: none;
    border-color: var(--accent-gold);
    box-shadow: 0 0 10px rgba(244,208,111,0.2);
  }

  @keyframes fadeIn {
    to { opacity: 1; }
  }

  /* Loading Pulse */
  .loading {
    display: inline-block;
    width: 10px; height: 10px;
    background: var(--accent-gold);
    border-radius: 50%;
    animation: pulse 1s infinite;
  }
  @keyframes pulse {
    0% { transform: scale(0.8); opacity: 0.5; }
    100% { transform: scale(1.5); opacity: 0; }
  }

  /* CTA */
  .cta {
    text-align: center;
    margin: 6rem 0 0;
    padding: 4rem 1rem;
    background: linear-gradient(to top, #000 20%, transparent);
    border-top: 1px solid rgba(255,255,255,0.05);
  }
  .cta a {
    color: var(--accent-gold);
    font-family: "Space Mono", monospace;
    font-weight: 700;
    font-size: 1rem;
    text-transform: uppercase;
    text-decoration: none;
    border: 1px solid var(--accent-gold);
    padding: 1rem 2rem;
    transition: 0.3s;
    display: inline-block;
  }
  .cta a:hover {
    background: var(--accent-gold);
    color: #000;
    box-shadow: 0 0 30px rgba(244, 208, 111, 0.3);
  }
  .footer-brand {
    margin-top: 2rem;
    font-family: "Space Mono", monospace;
    font-size: 0.7rem;
    color: #555;
    letter-spacing: 1px;
  }
</style>
</head>
<body>

<!-- FLOATING PORTALS -->
<div class="portal-nav">
  <a href="https://www.v2gmultimedia.com/ifa-ease-fa" target="_blank" class="portal-link">
    <div class="portal-orb" style="border-color:var(--accent-gold);">
      <span style="color:var(--accent-gold);">üåÄ</span>
    </div>
    <span class="portal-text">EASE FA</span>
  </a>

  <a href="https://www.v2gmultimedia.com/blog" target="_blank" class="portal-link">
    <div class="portal-orb" style="border-color:var(--primary);">
      <span style="color:var(--primary);">üì∞</span>
    </div>
    <span class="portal-text">V2G BLOG</span>
  </a>
</div>

<!-- BRAND BAR -->
<div class="brand-bar">
  <div class="brand-logo">V2G // ARCHIVE</div>
  <div class="hashtags">#GVI #V2G #IDENTITY #COSMIC</div>
</div>

<header>
  <h1>The Architecture<br>of Self</h1>
  <div class="subtitle">Interactive Blueprint ‚Ä¢ System V2.0</div>
  
  <div class="character-container">
    <a href="https://aseire.com" target="_blank" class="char-link" title="Visit ASE IRE Website">
      <svg class="char-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="glow1" x="-20%" y="-20%" width="140%" height="140%">
             <feGaussianBlur stdDeviation="3" result="blur"/>
             <feComposite in="SourceGraphic" in2="blur" operator="over"/>
          </filter>
        </defs>
        <circle cx="50" cy="50" r="48" stroke="rgba(244,208,111,0.3)" stroke-width="1" fill="rgba(0,0,0,0.3)" />
        <path d="M50 20 C35 20 25 35 25 55 C25 75 35 85 50 85 C65 85 75 75 75 55 C75 35 65 20 50 20 Z" fill="#5c3a21"/>
        <path d="M40 80 L60 80 L60 95 L40 95 Z" fill="#5c3a21"/>
        <path d="M20 50 C20 20 40 10 50 10 C60 10 80 20 80 50" fill="none" stroke="#f4d06f" stroke-width="3" filter="url(#glow1)"/>
        <circle cx="50" cy="15" r="3" fill="#f4d06f"/>
        <path d="M35 55 Q40 58 45 55" stroke="#000" stroke-width="2" fill="none"/>
        <path d="M55 55 Q60 58 65 55" stroke="#000" stroke-width="2" fill="none"/>
      </svg>
    </a>

    <a href="https://www.NAHUCEGVI.org" target="_blank" class="char-link" title="Visit NAHUCE GVI Website">
      <svg class="char-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="48" stroke="rgba(168,85,255,0.3)" stroke-width="1" fill="rgba(0,0,0,0.3)" />
        <path d="M25 30 Q15 50 20 70" stroke="#000" stroke-width="5" fill="none"/>
        <path d="M75 30 Q85 50 80 70" stroke="#000" stroke-width="5" fill="none"/>
        <path d="M50 20 L50 10" stroke="#000" stroke-width="5"/>
        <circle cx="50" cy="50" r="28" fill="#c68642"/>
        <rect x="30" y="42" width="40" height="10" rx="4" fill="#a855ff" opacity="0.9"/>
        <path d="M35 46 L65 46" stroke="#fff" stroke-width="1" opacity="0.6"/>
        <path d="M40 65 Q50 72 60 65" stroke="#332115" stroke-width="2" fill="none"/>
      </svg>
    </a>
  </div>

  <div class="mono" style="margin-top: 1.5rem; letter-spacing: 1px; color: var(--text-dim); font-size: 0.7rem;">
    My Current Teachers... <span style="color: var(--accent-gold);">(V2G Promo)</span>
  </div>
</header>

<!-- SLIDER SECTION -->
<div class="section">
  <div class="corner-decor tl"></div>
  <div class="corner-decor br"></div>
  <div class="mono">MODULE 01 // ANALYSIS</div>
  <h2>Identity Sliders</h2>
  <p>Calibrate your current state. Observe the data output below as you adjust.</p>

  <div class="slider-block">
    <label class="slider-label">MEMORY CONNECTION</label>
    <input type="range" id="memorySlider" min="0" max="100" value="50" />
    <div id="memoryFeedback" class="feedback">WAITING FOR INPUT...</div>
  </div>

  <!-- Re-added missing sliders -->
  <div class="slider-block">
    <label class="slider-label">ENVIRONMENTAL INFLUENCE</label>
    <input type="range" id="environmentSlider" min="0" max="100" value="50" />
    <div id="environmentFeedback" class="feedback">WAITING FOR INPUT...</div>
  </div>

  <div class="slider-block">
    <label class="slider-label">OR√ç (INNER VOICE) SIGNAL</label>
    <input type="range" id="oriSlider" min="0" max="100" value="50" />
    <div id="oriFeedback" class="feedback">WAITING FOR INPUT...</div>
  </div>
</div>

<!-- POP-UP SELF QUESTIONS -->
<div class="section">
  <div class="corner-decor tl"></div>
  <div class="corner-decor br"></div>
  <div class="mono">MODULE 02 // INQUIRY</div>
  <h2>Reflective Data Points</h2>
  <p>Access hidden files by selecting a prompt below.</p>

  <div class="popup-btn" onclick="togglePopup('q1')">
    <span class="popup-icon">üß¨</span> > ACCESS FILE: INHERITANCE
  </div>
  <div id="q1" class="popup">
    <div class="mono">STATUS: DECRYPTED</div>
    <br>Consider your ancestry. Which strength did you inherit that you use daily?
  </div>

  <div class="popup-btn" onclick="togglePopup('q2')">
    <span class="popup-icon">üëÅÔ∏è</span> > ACCESS FILE: AUTHENTICITY
  </div>
  <div id="q2" class="popup">
    <div class="mono">STATUS: DECRYPTED</div>
    <br>Recall a moment this year where you didn't have to pretend. That is your baseline.
  </div>

  <div class="popup-btn" onclick="togglePopup('q3')">
    <span class="popup-icon">üöÄ</span> > ACCESS FILE: REVISION
  </div>
  <div id="q3" class="popup">
    <div class="mono">STATUS: DECRYPTED</div>
    <br>Every creator edits. What paragraph of your life story needs a rewrite right now?
  </div>
</div>

<!-- MINI QUIZ (AI POWERED) -->
<div class="section">
  <div class="corner-decor tl"></div>
  <div class="corner-decor br"></div>
  <div class="mono">MODULE 03 // AI BLUEPRINT</div>
  <h2>Identity Synthesis ‚ú®</h2>
  <p>Input variables to generate your custom AI-powered architecture insight & soundtrack.</p>

  <div>
    <label class="mono">1. CURRENT STATE:</label>
    <select id="qFeel">
      <option value="calm">CALM & GROUNDED</option>
      <option value="confused">SEARCHING / CONFUSED</option>
      <option value="focused">LASER FOCUSED</option>
      <option value="changing">IN TRANSFORMATION</option>
    </select>
  </div>

  <div style="margin-top:1.5rem;">
    <label class="mono">2. LEARNING PROTOCOL:</label>
    <select id="qLearn">
      <option value="reflect">REFLECTION</option>
      <option value="move">MOVEMENT & ACTION</option>
      <option value="talk">COLLABORATION</option>
      <option value="study">DEEP STUDY</option>
    </select>
  </div>

  <div style="margin-top:1.5rem;">
    <label class="mono">3. INTERNAL SIGNAL:</label>
    <select id="qInner">
      <option value="quiet">QUIET</option>
      <option value="loud">LOUD & URGENT</option>
      <option value="uncertain">UNCERTAIN</option>
      <option value="guiding">CLEAR & GUIDING</option>
    </select>
  </div>

  <div style="margin-top:1.5rem;">
    <label class="mono">4. FUTURE TARGET:</label>
    <select id="qNext">
      <option value="stable">STABILITY</option>
      <option value="new">NOVELTY</option>
      <option value="creative">CREATIVE EXPANSION</option>
      <option value="aligned">SPIRITUAL ALIGNMENT</option>
    </select>
  </div>

  <button class="quiz-btn" onclick="runAIQuiz()" id="generateBtn">‚ú® INITIALIZE AI GENERATION</button>

  <div id="quizResult" class="final-message"></div>
</div>

<!-- ORACLE INTERFACE (NEW) -->
<div class="section">
  <div class="corner-decor tl"></div>
  <div class="corner-decor br"></div>
  <div class="mono">MODULE 04 // ORACLE INTERFACE</div>
  <h2>Consult the Frequency ‚ú®</h2>
  <p>Ask a question to the V2G collective consciousness. Receive guidance from the ether.</p>
  
  <input type="text" id="oracleInput" class="oracle-input" placeholder="Enter your query here (e.g. 'How do I find balance?')...">
  
  <button class="quiz-btn" onclick="askOracle()" id="oracleBtn">‚ú® TRANSMIT SIGNAL</button>
  
  <div id="oracleResult" class="final-message"></div>
</div>

<!-- CTA -->
<div class="cta">
  <a href="https://www.youtube.com/watch?v=9yVVT6l3RSw" target="_blank">CONTINUE TO ARCHIVE VIDEO ‚Üí</a>
  <div class="footer-brand">
    V2Gmultimedia // #GVI #V2G<br>
    DESIGNING THE FUTURE OF IDENTITY
  </div>

  <!-- DISCLAIMER -->
  <div style="margin-top: 2.5rem; font-size: 0.65rem; color: #666; max-width: 600px; margin-left: auto; margin-right: auto; line-height: 1.4; font-family: 'Space Mono', monospace; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 1rem;">
    // SYSTEM NOTICE: The content provided within this interface is not spiritual advice. 
    I am not a Priest or Babalawo. This portal utilizes AI and research to provide context, 
    illustrating the power of myth and culture. Exploring these traditions offers great knowledge 
    of the past to empower our future.
  </div>
</div>

<script>
  // API CONFIGURATION
  const apiKey = ""; 

  async function callGemini(prompt) {
    const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
    const payload = {
      contents: [{ parts: [{ text: prompt }] }]
    };

    try {
      const response = await fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
      const data = await response.json();
      return data.candidates[0].content.parts[0].text;
    } catch (error) {
      console.error("Gemini API Error:", error);
      return "Error: Signal Interrupted. Please try again.";
    }
  }

  // UTILITY FOR ANIMATING TEXT
  const typeWriter = (text, elementId, callback) => {
    const el = document.getElementById(elementId);
    el.innerHTML = "";
    el.style.display = "block";
    let i = 0;
    const speed = 15; 
    function type() {
      if (i < text.length) {
        el.innerHTML += text.charAt(i);
        i++;
        setTimeout(type, speed);
      } else if (callback) {
        callback();
      }
    }
    type();
  };

  // SLIDER LOGIC
  const sliderMessages = (value) => {
    if (value < 20) return "SIGNAL: LOW / LATENT";
    if (value < 50) return "SIGNAL: RISING / AWARE";
    if (value < 80) return "SIGNAL: STRONG / DEFINING";
    return "SIGNAL: DOMINANT / GUIDING";
  };

  // Wait for DOM to be ready before attaching listeners
  document.addEventListener('DOMContentLoaded', () => {
    const memSlider = document.getElementById("memorySlider");
    const envSlider = document.getElementById("environmentSlider");
    const oriSlider = document.getElementById("oriSlider");

    if (memSlider) {
        memSlider.oninput = (e) => {
            document.getElementById("memoryFeedback").textContent = sliderMessages(e.target.value);
        };
    }
    if (envSlider) {
        envSlider.oninput = (e) => {
            document.getElementById("environmentFeedback").textContent = sliderMessages(e.target.value);
        };
    }
    if (oriSlider) {
        oriSlider.oninput = (e) => {
            document.getElementById("oriFeedback").textContent = sliderMessages(e.target.value);
        };
    }
  });

  // POPUP LOGIC
  function togglePopup(id) {
    const el = document.getElementById(id);
    el.style.display = (el.style.display === "block") ? "none" : "block";
  }

  // --- AI FEATURE 1: DYNAMIC BLUEPRINT & SOUNDTRACK ---
  async function runAIQuiz() {
    const btn = document.getElementById("generateBtn");
    const resBox = document.getElementById("quizResult");
    
    // UI Loading State
    btn.innerHTML = "<span class='loading'></span> PROCESSING DATA...";
    btn.disabled = true;
    resBox.style.display = "none";
    resBox.innerHTML = "";

    // Gather Data
    const feel = document.getElementById("qFeel").value;
    const learn = document.getElementById("qLearn").value;
    const inner = document.getElementById("qInner").value;
    const next = document.getElementById("qNext").value;
    const memVal = document.getElementById("memorySlider").value;
    const envVal = document.getElementById("environmentSlider").value;
    const oriVal = document.getElementById("oriSlider").value;

    // Prompt Engineering
    // Added randomness to prompt to force variety
    const randomSeed = Math.floor(Math.random() * 100000);

    const prompt = `
      You are an expert architect of human identity, blending Hip-Hop culture, ancient wisdom (Ifa/Ori), and psychology.
      
      User Data:
      - Current Feeling: ${feel}
      - Learning Style: ${learn}
      - Inner Voice Status: ${inner}
      - Desired Future: ${next}
      - Memory Connection: ${memVal}%
      - Environment Influence: ${envVal}%
      - Ori (Inner Spirit) Signal: ${oriVal}%
      - Randomizer Token: ${randomSeed}

      Task:
      1. Write a deep, 2-sentence "Architectural Insight" about their current state based on this data. Use metaphors of building, foundations, or frequencies.
      2. Recommend ONE Hip-Hop, Neo-Soul, or Jazz song that perfectly matches this specific energy. 
         IMPORTANT: Please VARY your selection. Avoid repeating common hits like "Golden" or "Alright" unless absolutely necessary. Dig deeper into the catalog of artists like Erykah Badu, The Roots, Common, Robert Glasper, J Dilla, Fela Kuti, Moonchild, etc., to find a unique frequency for this specific user state.
      3. Provide a short quote from that song.
      4. Explain in one sentence why this song fits their vibe.

      Return ONLY a JSON object with these keys: "insight", "song_title", "song_artist", "song_quote", "vibe_reason". Do not use markdown blocks.
    `;

    // Call API
    let jsonResponse = {};
    try {
      const textResponse = await callGemini(prompt);
      // Clean up potential markdown code blocks
      const cleanText = textResponse.replace(/```json/g, "").replace(/```/g, "").trim();
      jsonResponse = JSON.parse(cleanText);
    } catch (e) {
      jsonResponse = {
        insight: "Signal fuzzy. The architecture requires a manual reset. Trust your inner knowing.",
        song_title: "Can I Kick It?",
        song_artist: "A Tribe Called Quest",
        song_quote: "Erratic impulse, but we still flow.",
        vibe_reason: "Fallback protocol initiated."
      };
    }

    // Render Results
    resBox.style.borderColor = "#f4d06f"; 
    resBox.style.boxShadow = "0 0 15px rgba(244, 208, 111, 0.2)";
    resBox.style.display = "block";

    typeWriter(`ANALYSIS COMPLETE: ${jsonResponse.insight}`, "quizResult", () => {
      const songHTML = `
        <div class="song-block">
          <div class="song-header">RECOMMENDED SOUNDTRACK FREQUENCY</div>
          <div class="song-title">‚ô´ ${jsonResponse.song_title}</div>
          <div class="song-artist">${jsonResponse.song_artist}</div>
          <div class="song-quote">"${jsonResponse.song_quote}"</div>
          <div class="vibe-reason">// DATA MATCH: ${jsonResponse.vibe_reason}</div>
        </div>
      `;
      resBox.insertAdjacentHTML('beforeend', songHTML);
      btn.innerHTML = "‚ú® RE-INITIALIZE GENERATION";
      btn.disabled = false;
    });
  }

  // --- AI FEATURE 2: THE ORACLE ---
  async function askOracle() {
    const input = document.getElementById("oracleInput");
    const btn = document.getElementById("oracleBtn");
    const resBox = document.getElementById("oracleResult");
    const query = input.value.trim();

    if (!query) return;

    // UI Loading State
    btn.innerHTML = "<span class='loading'></span> TRANSMITTING...";
    btn.disabled = true;
    resBox.style.display = "none";

    const prompt = `
      You are the V2G Oracle, a timeless entity existing in the digital ether. You speak in a blend of ancient proverbs and futuristic, cyber-tech metaphors.
      The user asks: "${query}"
      Provide a brief, profound answer (max 3 sentences). Be cryptic but encouraging. Use terms like "frequency", "alignment", "blueprint", "signal", "ancestral data".
    `;

    const responseText = await callGemini(prompt);

    resBox.style.borderColor = "#a855ff"; 
    resBox.style.boxShadow = "0 0 15px rgba(168, 85, 255, 0.2)";
    
    typeWriter(`// ORACLE RESPONSE: ${responseText}`, "oracleResult", () => {
      btn.innerHTML = "‚ú® TRANSMIT SIGNAL";
      btn.disabled = false;
    });
  }
</script>

</body>
</html>